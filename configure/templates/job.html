


{% extends 'base.html' %}

{% block scripts %}
{% endblock %}

{% block content %}

<h2>Job {{job.id}}: {{job.description}}</h2>
<ul>
    <li>State: {{job.state}}</li>
    <li>Paused: {{job.paused}}</li>
    <li>Errored: {{job.errored}}</li>
    <li>Cancelled: {{job.cancelled}}</li>
</ul>

<h3>Debug: Wait for {{job.wait_for_completions}}/{{job.wait_for_count}}:</h3>
<ul>
    {% for dep in job.wait_for.all %}
    <li>{{dep}}</li>
    {% endfor %}
</ul>

<h3>Debug: Dependencies</h3>
<pre>
{{job.all_deps.debug_list}}
</pre>
<ul>
    {% for dep in job.all_deps.all %}
    <li>{{dep.stateful_object}},{{dep.acceptable_states}},{{dep.stateful_object.state}},{{dep.satisfied}}</li>
    {% endfor %}
</ul>

<h3>Debug: locks</h3>
<ul>
    {% for l in job.statelock_set.all %}
    <li>{{l}}</li>
    {% endfor %}
</ul>

<h3>Steps</h3>

<table>
    <tr>
        <th>Id</th>
        <th>Task id</th>
        <th>info</th>
        <th>State</th>
    </tr>
{% for step in job.stepattempt_set.all %}

<tr>
    <td>{{step.id}}</td>
    <td>{{step.debug_step}}</td>
    <td>{{step.step_index}}</td>
    <td>{{step.task_id}}</td>
    <td>
        <ul>
        {% for k,v in step.info.items %}
        <li>{{k}}: {{v}}</li>
        {% endfor %}
        </ul>
    </td>
    <td>{{step.state}}</td>
</tr>

{% endfor %}
</table>

{% endblock %}

