


{% extends 'base.html' %}

{% block scripts %}
{% endblock %}

{% block content %}

<h2>Job {{job.id}}: {{job.description}}</h2>
<ul>
    <li>State: {{job.state}}</li>
    <li>Paused: {{job.paused}}</li>
    <li>Errored: {{job.errored}}</li>
    <li>Cancelled: {{job.cancelled}}</li>
</ul>

<h3>Output</h3>

{% for step_result in job.stepresult_set.all %}
    <h4>Step {{step_result.step_number}} of {{step_result.step_count}}</h4>
    <p>Step class: {{step_result.step_klass_name}}</p>
    <p>Parameters: {{step_result.args}}</p>
    <p>State: {{step_result.state}}</p>
    <p>Started at {{step_result.created_at}}, last updated at {{step_result.modified_at}}</p>
    <h5>Console output</h5>
    <pre>{{step_result.console}}</pre>
    {% if step_result.exception %}
        <h5>Exception</h5>
        <pre>{{step_result.exception}}</pre>
        {% if step_result.backtrace %}
        <h5>Backtrace</h5>
        <pre>{{step_result.backtrace}}</pre>
        {% endif %}
    {% endif %}

{% endfor %}

<h3>Debug: Wait for {{job.wait_for_completions}}/{{job.wait_for_count}}:</h3>
<ul>
    {% for dep in job.wait_for.all %}
    <li>{{dep}}</li>
    {% endfor %}
</ul>

<h3>Debug: Dependencies</h3>
<pre>
{{job.all_deps.debug_list}}
</pre>
<ul>
    {% for dep in job.all_deps.all %}
    <li>{{dep.stateful_object}},{{dep.acceptable_states}},{{dep.stateful_object.state}},{{dep.satisfied}}</li>
    {% endfor %}
</ul>

<h3>Debug: locks</h3>
<ul>
    {% for l in job.statelock_set.all %}
    <li>{{l}}</li>
    {% endfor %}
</ul>

{% endblock %}

