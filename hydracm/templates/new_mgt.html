<script>
  $(document).ready(function() {
    //cm-json_table_data => load existing MGT list. 
    LoadMGTConfiguration_MGTConf();

    // List Existing MGT JQuery Table init()
    var oMgtConfiguration = $('#mgt_configuration').dataTable( {
      bPaginate: false,
      bFilter: false,
      bInfo: false,
      "bProcessing": true,
      "bJQueryUI": true,
      "bDestory": true,
      "oLanguage": {
          "sEmptyTable": "No MGT to display"
      },
      "aoColumns": [
        { "sClass": 'txtleft' },
        { "sClass": 'txtleft' },
        { "sClass": 'txtleft' },
        { "sClass": 'txtleft' },
        { "sClass": 'txtleft' },
        { "sClass": 'txtcenter' }
      ]
    } );

    $('#btnNewMGT').attr('disabled', true);
    fvc_button($('#new_mgt_chooser'), {
      change: function() {
        var val = fvc_get_value($('#new_mgt_chooser'));
        $('#btnNewMGT').attr('disabled', val == null);
      }
    });

    $('#btnNewMGT').click(function(){
      CreateMGT(fvc_get_value($('#new_mgt_chooser')), function() {
        console.log('callback');
        fvc_clear($('#new_mgt_chooser'));
        LoadMGTConfiguration_MGTConf();
      })
    });
    
  });
</script>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="padding-top:15px;">
  <tr>
    <td width="100%" height="68" align="left" valign="top"><fieldset>
      <legend class="legendClass">MGT Configuration</legend>
      <table cellpadding="0" cellspacing="0" border="0" class="display" id="mgt_configuration" width="100%">
        <thead>
          <tr>
            <th width='19%' class="blueheader" bgcolor="#990000">Filesystems</th>
            <th width='15%'>Volume</th>
            <th width='15%'>Primary server</th>
            <th width='15%'>Failover server</th>
            <th width='15%'>Started on</th>
            <th width='21%'></th>
          </tr>
        </thead>
        <tbody id="mgt_configuration_content">
        </tbody>
      </table>
      <div class="spacer"></div>
      </fieldset></td>
  </tr>
  <tr>
    <td height="20"></td>
  </tr>
  <tr>
    <td align="left" valign="middle"><fieldset>
      <legend class="legendClass">New MGT</legend>
      <button id='new_mgt_chooser'></button>
      <button type="button" id="btnNewMGT">Create new MGT</button>
      </td>
  </tr>
</table>
