<!DOCTYPE html>
<html ng-app="iml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <$= t('target_detail.html') $>
    <$= t('user_detail.html') $>
    <$= t('command_detail.html') $>
    <$= t('storage_resource_detail.html') $>
    <$= t('volume_chooser_templates.html') $>
    <script type='text/javascript'>
      // Take a javascript copy of the STATIC_URL variable
      // so that we can access it from static .js code
      var STATIC_URL = '<$= conf.get("STATIC_URL") $>';
      var CACHE_INITIAL_DATA = <$= JSON.stringify(cache) $>;
      var HELP_TEXT = <$= JSON.stringify(conf.get('HELP_TEXT')) $>;
      var UI_ROOT = "/ui/";

      // Set Dependencies for this portion of the application
      window.dependencies = ['controllers', 'models', 'interceptors', 'ngResource', 'constants',
        'ui.bootstrap', 'services', 'filters', 'ui', 'directives', 'timing', 'exception'];
    </script>

    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/base.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/header.css" type="text/css" />
    <link href="<$= conf.get('STATIC_URL') $>css/datatables.css" rel="stylesheet" type="text/css" />
    <link href="<$= conf.get('STATIC_URL') $>css/smoothness/jquery-ui.css"  rel="stylesheet" type="text/css" />
    <link href="<$= conf.get('STATIC_URL') $>css/smoothness/jquery-ui-extend.css"  rel="stylesheet" type="text/css" />
    <link href="<$= conf.get('STATIC_URL') $>css/BreadCrumb.css" rel="stylesheet" type="text/css" />

    <link href="<$= conf.get('STATIC_URL') $>css/resource_graph.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/target_detail.css" type='text/css' />
    <link href="<$= conf.get('STATIC_URL') $>css/storage_resource_detail.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/filesystem_detail.css" type="text/css"/>
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/detail_screen.css" type='text/css' />

    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/notifications.css" type='text/css' />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/jquery.qtip.min.css" type='text/css' />

    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/bootstrap/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/bootstrap/bootstrap-extend.css" type="text/css"/>
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/font-awesome/font-awesome.css" type="text/css"/>
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/volume.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/big_green_button.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/power_control.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/outlet_info.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>css/create_pdu.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>js/modules/exception/assets/css/exception-dialog.css" type="text/css" />
    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>js/modules/exception/assets/css/disconnect-dialog.css" type="text/css" />

    <link rel="stylesheet" href="<$= conf.get('STATIC_URL') $>js/lib/select-box-it/select-box-it.css" />

    <link rel="icon" href="<$= conf.get('STATIC_URL') $>images/intel.ico" />

    <!-- Frameworks -->
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery-ui.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/highcharts.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery.peity.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/lodash.custom.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/underscore-min.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/backbone-min.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/angular/angular.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/angular/angular-resource.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/angular/ui-bootstrap.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/angular/angular-ui.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/xdate.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/sprintf/sprintf.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/app.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/app-compatibility.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/constants.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/interceptors/interceptor_module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/interceptors/tastypie.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/interceptors/clean-request-url.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/controllers/controller_module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/controllers/bigGreenButton.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/controllers/power_control.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/controllers/dialogs/create_pdu.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/controllers/dialogs/create_bmc.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/models_module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/base_model.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/alert.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/health.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/power_control_device.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/power_control_device_outlet.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/power_control_type.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/models/host.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/services_module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/compile_template.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/safe_apply.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/paging.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/generate_command_dropdown.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/interval.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/services/page-title.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/filters/filters_module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/filters/capitalize.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/directives/directive_module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/directives/context_tooltip.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/directives/command-dropdown.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/directives/power_control_autocomplete.js"></script>

    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/exception-module.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/exception-handler.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/exception-dialog.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/exception-dialog-controller.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/exception-interceptor.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/client-error-model.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/disconnect-handler.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/disconnect-dialog.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/modules/exception/replay.js"></script>

    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/json2.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/misc.js"></script>
    <script type='text/javascript'>
      window.TIME_OFFSET = Math.round((new Date(<$= getServerDate().getTime() $>) - new Date()) / 1000);
    </script>

    <!-- Plugins -->
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery.blockUI.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery.dataTables.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery.qtip.min.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/select-box-it/select-box-it.js"></script>

    <!-- Application (toplevel) -->
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/ui_tools.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/abort-on-unload.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/api.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/api_cache.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/router.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/login.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/notifications.js" ></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/highcharts_theme.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/help.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/conf_params.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/chart_manager.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/text_updater.js"></script>

    <!-- Application (individual panes) -->
    <script type='text/javascript' src="<$= conf.get('STATIC_URL') $>js/user_detail.js"></script>
    <script type='text/javascript' src="<$= conf.get('STATIC_URL') $>js/target_detail.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/storage_resource_detail.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/command_detail.js"></script>
    <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/system_status.js"></script>

    <!-- Templates -->
    <$= t('system_status.html') $>

    <title>Intel&reg; Manager for Lustre* software</title>
  </head>

  <script type='text/javascript'>
    $(document).ready(function() {
        $('div.rightpanel').css('visibility', 'hidden');
        Login.init();
        ContextualHelp.init();

        $('div.rightpanel').css('visibility', 'visible');
        window.loaded = true;

        new ChromaRouter();
        Api.on_available(function() {
            Backbone.history.start({root: UI_ROOT, pushState: true})
        });

        var copyrightElement = document.getElementsByClassName('copyright-year')[0];
        copyrightElement.innerHTML = window.HELP_TEXT.copyright_year;
    });
  </script>

  <body>
    <div class='page-wrapper'>
      <div class="navbar navbar-inverse">
        <div class="navbar-inner">
          <div class="container">
            <a class="btn btn-navbar" ng-click="isCollapsed = !isCollapsed">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <a class="brand" href="/ui">
              <span class="logo"></span>
            </a>
            <div class="nav-collapse collapse navbar-inverse-collapse" collapse="isCollapsed">
              <ul class="nav">
                <li>
                  <a id="dashboard-menu" class="navigation skip_router" href="/ui/dashboard/"><i class="icon-bar-chart"></i> Dashboard</a>
                </li>
                <li class="dropdown fsadmin_only">
                  <a class="navigation dropdown-toggle" id="configure-menu" href="#"><i class="icon-cog"></i> Configuration <i class="icon-caret-down"></i></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a id="server-conf-item" href="/ui/configure/server/" title='servers'>Servers</a></li>
                    <li><a id="power-conf-item" class="navigation" href='/ui/configure/power/' title='power'>Power Control</a></li>
                    <li><a id="filesystem-conf-item" class="navigation" href='/ui/configure/filesystem/' title='filesystems'>File Systems</a></li>
                    <li><a id="hsm-conf-item" class="skip_router" href="/ui/configure/hsm/">HSM</a></li>
                    <li><a id="storage-conf-item" class="navigation" href='/ui/configure/storage/' title='storage'>Storage</a></li>
                    <li><a id="user-conf-item" class="superuser_only navigation" href='/ui/configure/user/' title='users'>Users</a></li>
                    <li><a id="volume-conf-item" class="navigation" href='/ui/configure/volume/' title='volumes'>Volumes</a></li>
                    <li><a id="mgt-conf-item" class="navigation" href='/ui/configure/mgt/' title='mgts'>MGTs</a></li>
                  </ul>
                </li>
                <li>
                  <a id="log-menu" class="navigation" href="log/"><i class="icon-book"></i> Logs</a>
                </li>
                <li>
                  <a id="help-menu" class="navigation skip_router" href="<$= conf.get('STATIC_URL') $>webhelp/help_wrapper.html" target="_blank"><i class="icon-question-sign"></i> Help</a>
                </li>
                <li class="status-menu-container">
                  <a id="status-menu" class="navigation status-nav skip_router" href="/ui/status/" context-tooltip="status_light" tooltip-placement="bottom">
                    <span ng-controller="BigGreenButtonCtrl" ng-class="bigGreen.status.health" class="ng-cloak badge">
                      ((bigGreen.count))<sup ng-if="bigGreen.aboveLimit">+</sup>
                    </span>
                    <span class="status-text">Status</span>
                  </a>
                </li>
              </ul>
              <ul class="nav pull-right">
                <li>
                  <a class="navigation skip_router" href="/ui/status/">
                    <i id="notification_icon_jobs" class="icon-spinner icon-spin" style="display: none;"> </i>
                  </a>
                </li>
                <li>
                  <a href="/ui/about/">
                    <$ if (conf.get('IS_RELEASE')) { $>
                      <$= conf.get('VERSION') $>
                    <$ } else { $>
                      Build <$= conf.get('BUILD') $>
                    <$ } $>
                  </a>
                </li>
                <li>
            <span id="user_info">
              <span id="authenticated">
                <a href='#' id='account'>Account</a>
                <a href="#" class='logout'>Logout</a>
              </span>
              <span id="anonymous">
                <a href="/ui/login/" class='login'>Login</a>
              </span>
            </span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <script type='text/javascript'>
        /* the class skip_router is a function only class that intends to allow
         static links to exist in the nav without the backbone router taking over
         and having the URL rewritten to be prefixed with /ui/
         i.e. help_wrapper link
         */
        $(document).ajaxComplete(function() {
          $("a.navigation:not(a.skip_router)").each(function() {
            var el = $(this);
            var href = el.attr('href');
            if (href.indexOf(UI_ROOT) != 0) {
              el.attr('href', UI_ROOT + href);
            }
          });
        });
        $(document).ready(function() {
          $("a.navigation:not(a.skip_router)").live('click', function(ev) {
            var url = $(this).attr('href').substr(UI_ROOT.length);
            Backbone.history.navigate(url, {trigger: true});
            ev.preventDefault();
          });
        });
      </script>

      <noscript>
        <p>Chroma requires JavaScript to be enabled.</p>
      </noscript>
      <div class='read_enabled_only rightpanel'>
        <div class="toplevel" id='toplevel-configure' style="display: none;">
          <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/configure_charts.js"></script>
          <script type='text/javascript' src="<$= conf.get('STATIC_URL') $>js/filesystem_configuration.js"></script>
          <$= t('configuration.html') $>
        </div>
        <div class="toplevel" id='toplevel-log' style="display: none;">
          <script type="text/javascript" src="<$= conf.get('STATIC_URL') $>js/lib/jquery-ui-timepicker-addon.js"></script>
          <$= t('logs.html') $>
        </div>
        <div class="toplevel" id='toplevel-system_status' style="display: none;"></div>
      </div>
    </div>
    <footer class="container logo-footer">
      <div class="row">
        <div class="span12">
          <small>
            Intel&reg; Manager for Lustre* software <$= conf.get('VERSION') $> (build <$= conf.get('BUILD') $>) is
            Copyright &copy; <span class="copyright-year"></span> Intel Corporation. All rights reserved.
            <a href="/ui/about/">About Intel&reg; Manager for Lustre* software</a>
            &nbsp;
            <a class="navigation superuser_only" href="/ui/system_status/">System status</a>
          </small>
        </div>
      </div>
    </footer>
  </body>
</html>
